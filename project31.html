<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<!--  External libraries -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<!--  External libraries -->

<style>
    body{
        background-color: rgb(37, 1, 66);
        font-family: "Tajawal", sans-serif;

    }
    .task{
        display: flex;
        background-color: hsla(289, 20%, 63%, 0.944);
        border-bottom: solid black 1px ;
    }
    .done {
    background-color: hsla(120, 50%, 50%, 0.5); /* A different color to indicate "done" */
    text-decoration: line-through; /* Strike through text to show it's completed */
    }

    .task:hover {
        box-shadow: 0px 3px 15px rgba(1, 12, 9, 0.963);;
        transition: 0.2s;

    }
    .tasks-table {
        background-color: rgb(143, 126, 154);
        width: 60%;
        //height: 500px;
        margin-top: 130px ;
    }
    button {
        border: none;
        font-size: 20px;
        box-shadow: 0px 3px 5px rgba(168, 168, 168, 0.38);
    }
    button.circular {
        height: 40px;
        width: 40px;
        border-radius: 50%;
        line-height: 0;
    }
</style>

<body>
    <div style="direction: rtl">
        <!-- Center Div-->
        <div style="display: flex; justify-content: center; align-items: center; font: white; ">
            
            <!-- Task T -->

            <div class="tasks-table">
            <!-- Header -->
             <div style="width: 100%;; text-align: center; background-color: rgb(70, 2, 70); color: white; padding-top: 8px; padding-bottom: 8px ;">
                <h1 style="display: inline;">Tasks</h1>
                <button id="add-btn" class="circular" style=" float: right; background-color: rgb(207, 194, 194); margin-right: 10px ;"> 
                    <span class="material-symbols-outlined">
                        add
                        </span>

                </button>


             </div>
             <!-- Header -->

             <!-- tasks -->
             <div id="tasks" style="padding: 5px;">

                <!-- Task -->
                <div class="task">

                    <!-- tasks Info -->
                     <div style="width: 70%; background-color: white;">
                        <h2> إقرأ كتاب</h2>
                        <div>
                            <span>
                                <span class="material-symbols-outlined">
                                    calendar_month
                                    </span>
                                 10/10/2039
                            </span>
                        </div>
                     </div>
                    <!-- tasks info -->


                    <!-- taskss Actions -->
                     <div style="display: flex; justify-content: space-between ; align-items: center; width: 20%; color: white;">
                        <button class="circular" style="background-color: #eacdcd;color: rgb(189, 12, 12);"><span class="material-symbols-outlined">
                            delete
                            </span></button>

                        <button class="circular" style="background-color: #eacdcd;color: rgb(47, 159, 13);"><span class="material-symbols-outlined">
                            check
                            </span></button>

                        <button class="circular" style="background-color: #eacdcd;color: rgba(167, 36, 156, 0.903);"><span class="material-symbols-outlined">
                            edit
                            </span></button>


              <!-- tasks -->
              <div class="tasks" style="padding: 5px;">

                <!-- Task -->
                <div class="task"> </div>

                <!-- Task -->
                 

             </div>




            </div>

         <!-- Task T -->


        </div>
        <!-- Center Div-->
    </div>

</body>

<script>


 let tasks = [

 {
    "title" : "Read a book ",
    "date": "15/101/2023",
    "isDone": false

 },
 {
    "title" : "The Final Project is Completed",
    "date": "15/101/2023",
    "isDone": false

 },
 {
    "title" : " إنهاءمشروع الجافاسكربت",
    "date": "15/101/2023",
    "isDone": false
 },


 ]
 
 

 function fillTasksOnThePage(){



    document.getElementById("tasks").innerHTML = ""

    let index = 0

    for (task of tasks) {
        let content =
         `
          <div id="Tasks" style="padding: 5px;">
                <!-- Task -->
                <div class="task ${task.isDone ? 'done':''}">

                    <!-- Tasks Info -->
                     <div style="width: 70%;">
                        <h2> ${task.title}</h2>

                        <div>
                            <span>
                                <span class="material-symbols-outlined">
                                    calendar_month
                                </span>
                                ${task.date}
                            </span>
                        </div>
                     </div>
                    <!-- Tasks info -->

                    <!-- Taskss Actions -->
                     <div style="display: flex; justify-content: space-between; align-items: center; width: 20%; color: white;">
                        <button onclick="deleteTask(${index})" class="circular" style="background-color: #eacdcd;color: rgb(118, 0, 101);">
                            <span class="material-symbols-outlined">delete</span>
                        </button>
                        ${task.isDone ? `<button onclick="toggleTaskCompletion(${index})" class="circular" style="background-color: #eacdcd;color: rgb(47, 159, 13);">
                            <span class="material-symbols-outlined">cancel</span>
                        </button>` : `
                        <button onclick="toggleTaskCompletion(${index})" class="circular" style="background-color: #eacdcd;color: rgb(47, 159, 13);">
                            <span class="material-symbols-outlined">check</span>
                        </button>
                        `}

                        <button onclick="editTask(${index})" class="circular" style="background-color: #eacdcd;color: rgba(167, 36, 156, 0.903);">
                            <span class="material-symbols-outlined">edit</span>
                        </button>

                     </div>
                     <!-- Taskss Actions -->
                </div>
                <!-- Task -->
            </div>
        `;

        document.getElementById("tasks").innerHTML += content; 
        index++

   
    }}
    fillTasksOnThePage()
 
    document.getElementById("add-btn").addEventListener("click", function() {
    let now = new Date()
    let date = now.getDate() + "/" + (now.getMonth()+1) + "/" + now.getFullYear()
        let taskName = prompt("Please enter your task ")    
    let taskObj = {
        "title": taskName,
        "date": date,
        "isDone" : false

    }
    tasks.push(taskObj)

    storeTasks()
    

    fillTasksOnThePage()

    }) 

    function deleteTask(index){
        let Task = tasks[index]
        let isConfirmed = confirm("Are you sure you want to delete this task?" + Task.title)
        
        if(isConfirmed){ 
        tasks.splice(index, 1)
        storeTasks()
        fillTasksOnThePage()

        }

    }

    function editTask(index){
        let Task = tasks[index]
        let newTaskTitle = prompt("Please enter the new task name" , Task.title)
        Task.title = newTaskTitle
        storeTasks()
        fillTasksOnThePage()
    }

    function toggleTaskCompletion(index){
        let task = tasks[index]
        task.isDone = !task.isDone
        storeTasks()
        fillTasksOnThePage()
    }

//=========STORAGE FUNCTION=======//

function storeTasks() {
    localStorage.setItem("savedTask", JSON.stringify(tasks));
}
</script>
</html>